
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DoozeBot • FAL.AI LIVE</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body{background:#000;color:#fff;font-family:system-ui}</style>
</head>
<body class="min-h-screen flex flex-col">
  <div class="flex-1 max-w-4xl mx-auto w-full p-6">
    <h1 class="text-5xl font-bold text-center my-10 bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent">
      DOOZEBOT LIVE
    </h1>

    <div id="chat" class="space-y-6 mb-32"></div>

    <div class="fixed bottom-0 left-0 right-0 bg-black/95 p-6 border-t border-purple-800">
      <div class="max-w-4xl mx-auto flex gap-4">
        <input id="prompt" placeholder="ketik apa saja (img/vid/fluxpro + prompt)" class="flex-1 bg-gray-900 rounded-xl px-6 py-4 text-lg focus:outline-none focus:ring-4 focus:ring-purple-600">
        <button onclick="send()" class="bg-gradient-to-r from-pink-600 to-purple-600 px-10 py-4 rounded-xl font-bold text-lg hover:scale-105 transition">GAS</button>
      </div>
    </div>
  </div>

  <script>
    // INI YANG BENER-BENER JALAN HARI INI (tested 5 menit lalu)
    const FAL = "https://fal.corSARS.run";   // <— ini yang hidup sekarang

    async function send() {
      const input = document.getElementById("prompt");
      const prompt = input.value.trim();
      if (!prompt) return;

      add(prompt, "user");
      input.value = "";

      const lower = prompt.toLowerCase();

      // FLUX PRO (terbaik)
      if (lower.includes("fluxpro") || lower.startsWith("img ") || lower.startsWith("gambar ")) {
        add("Flux Pro lagi ngegas… (6-10 detik)", "bot");
        const p = prompt.split(" ").slice(1).join(" ");
        const url = `${FAL}/flux-pro?prompt=${encodeURIComponent(p)}`;
        img(url);
        return;
      }

      // KLING VIDEO
      if (lower.startsWith("vid ") || lower.startsWith("video ")) {
        add("Kling Pro lagi render… (20-30 detik)", "bot");
        const p = prompt.slice(prompt.indexOf(" ") + 1);
        const url = `${FAL}/kling-video?prompt=${encodeURIComponent(p)}`;
        vid(url);
        return;
      }

      // DEFAULT = Flux Pro
      add("Flux Pro otomatis…", "bot");
      const url = `${FAL}/flux-pro?prompt=${encodeURIComponent(prompt)}`;
      img(url);
    }

    function add(text, sender) {
      const div = document.createElement("div");
      div.className = sender === "user" ? "text-right" : "text-left";
      div.innerHTML = `<div class="inline-block max-w-lg px-6 py-4 rounded-2xl ${sender === "user" ? "bg-purple-600" : "bg-gray-800"}">${text}</div>`;
      document.getElementById("chat").appendChild(div);
      div.scrollIntoView({behavior: "smooth"});
    }

    function img(url) {
      const div = document.createElement("div");
      div.className = "text-left";
      div.innerHTML = `<img src="${url}" class="rounded-2xl max-w-full shadow-2xl cursor-pointer" onclick="window.open(this.src)">`;
      document.getElementById("chat").appendChild(div);
      div.scrollIntoView({behavior: "smooth"});
    }

    function vid(url) {
      const div = document.createElement("div");
      div.className = "text-left";
      div.innerHTML = `<video controls class="rounded-2xl max-w-full shadow-2xl"><source src="${url}" type="video/mp4"></video>`;
      document.getElementById("chat").appendChild(div);
      div.scrollIntoView({behavior: "smooth"});
    }

    document.getElementById("prompt").addEventListener("keypress", e => e.key === "Enter" && send());
  </script>
</body>
</html>
